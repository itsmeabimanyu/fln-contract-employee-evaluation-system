{% extends 'layouts/base.html' %}
{% load static custom_filters %}
<!-- [ Main Content ] start -->
{% block content %}

<div class="tile mb-4">
    <div class="page-header">
        <form method="post" id="myForm">
        {% csrf_token %}
            <div class="row">
                <div class="col-lg-12">
                    <div class="mailbox-controls">
                    <h3 class="tile-title">{{ card_title }}</h3>
                    <div class="btn-group">
                       {{ btn_group|safe }}
                    </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table id="add-row" class="table table-sm table-hover table-bordered" >
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="check-all" {% if not items %}disabled{% endif %}></th>
                                <th>#</th>
                                {% if fields %}
                                    {% for key, field in fields.items %}
                                        <th>{{ field }}</th>
                                    {% endfor %}
                                {% else %}
                                    {% for field in formset %}
                                        <th>{{ field.label }}</th>
                                    {% endfor %}
                                {% endif %}
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- ListView -->
                            {% for item in items %}
                            <tr>
                                <td><input type="checkbox" class="select" name="select" value="{{ item.id }}"></td>
                                <td class="clickable table-secondary">{{ forloop.counter }}</td>
                                {% if fields %}
                                    {% for field in fields %}
                                    <td>{{ item|get_field_value:field|upper|safe }}</td>
                                    {% endfor %}
                                {% else %}
                                    {% for field in formset %}
                                    <td>{{ item|get_field_value:field.name|upper|safe }}</td>
                                    {% endfor %}
                                {% endif %}
                                <td>
                                    <!-- <button type="button" class="btn btn-sm btn-secondary dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#act-{{ item.id }}">Options </button>
                                    <div id="act-{{ item.id }}" class="collapse mt-1"> -->
                                        {% for value in item.buttons_action %}
                                            {{ value|safe  }}
                                        {% endfor %}
                                    <!-- </div> -->
                                </td>
                            </tr>
                            {% endfor %}
                            <!-- End ListView -->
                        </tbody>
                    </table>
                </div>
            </div>
        </form>
    </div>
</div>

{% block modal %}
    {% include 'includes/modal.html' %}
{% endblock modal %}

{% endblock content %}
